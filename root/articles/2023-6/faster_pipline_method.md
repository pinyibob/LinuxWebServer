# faster pipline shader

渲染管线加速的常规思路有
1. 减少渲染顶点数
2. 减小光照计算消耗
3. 减小纹理计算消耗
4. 减弱片元着色器的各种花里胡哨的特效

对于1而言，基础的有视锥剔除，视图裁剪，背面渲染跳过； 进阶些的有遮挡剔除，mesh顶点简化, LOD等等；
对于3而言，有mipmap算法等；
主要还是1的优化；

## LOD （Level of Detail）
LOD（Level of Detail）在计算机图形学中是一种常用的技术，用于优化细节较多的3D模型的渲染。常见的LOD算法包括:
1. 简化网格（Simplification）
2. 表面分割（Surface Partitioning）
3. 渐进式网格（Progressive Mesh）

在UE4中，LOD的实现方式是对同一个模型的数据进行计算。在导入一个静态模型时，UE4会根据需要自动为该模型生成多个不同的LOD。每个LOD都是从原始模型中向下简化得到的，其有着不同的三角面片数量、顶点数量和面片质量等特点。

默认情况下，UE4会自动在渲染时根据模型的距离和占屏幕比例选取合适的LOD进行渲染。在UE4中，LOD的切换是通过动态计算完成的，而不是使用多个不同的模型。这样一来，节省了内存，并且可以保持模型材质、变换等的一致性，避免了多个模型切换造成的图形跳动等问题。

通过UE4的LOD(Mesh LOD System)系统，我们可以轻松实现多级细节的动态调整，提高渲染效率，降低硬件压力，加速游戏场景的渲染速度。同时，在进行LOD设置时，我们需要注意不同LOD之间的过渡效果，确保不会出现明显的级别跳变和过度渐变不自然的情况。

核心key值 ：  模型占屏幕总比例，模型距离屏幕距离，曲率

## mesh simplication
网格简化（mesh simplification）是计算机图形学中的一个重要技术，用于降低3D模型中面片数量并保持模型的主要特征。常用的网格简化算法有:

1. 顶点合并法（Vertex Merging）：将一些相邻的顶点合并成一个单独的顶点，在此过程中需要保证模型的拓扑结构不变。
2. 边塌陷法（Edge Collapse）：对于相邻的三角形，将其中的边两端顶点合并成一个顶点，并删除相应的边和面。
3. 迭代最小化误差法（Iterative Minimization of Energy）：通过定义网格简化问题的能量函数，迭代更新顶点位置，以得到一个更小的误差模型。
4. 保持表面质量的三角化（Triangle Strips）：先将模型边界进行三角化，再使用贪心的方法不断将三角形往模型内部35添加，以保持模型表面质量不变。
5. 层次三角化（Progressive Mesh）：通过不断抽取模型的一些面片和点，构建出不同分辨率的模型，以适应不同场合的渲染效果。
这些算法在不同的情况下有着各自的优缺点，其核心思想都是在尽可能保持模型主要特征的基础上，通过简化模型来提高计算效率、降低内存占用等问题。(2d中例如，道格拉斯普克算法)

著名算法 ： ***三角网动态简化*** [link](https://hhoppe.com/proj/newqem/)
> 三角网动态简化是指在三角网模型被编辑或变形时，动态简化算法可以自适应地调整三角网模型的分辨率或几何细节，以保持模型的一致性和可编辑性。例如，在三角网模型中添加、删除或移动顶点时，三角网动态简化可以自动地减少或增加三角形数量，以保持模型的简单性和性能。因此，该技术适用于需要快速编辑三维模型并实时显示的应用场合，比如虚拟现实、游戏制作、建筑设计等领域。 

无论是lod简化还是mesh简化，都是在cpu中进行的计算；

## mipmap
Mipmap是一种纹理贴图的生成方法，它是由多个不同分辨率的纹理贴图组成的纹理集合。在Mipmap中，第0级就是原始的纹理图像，而第1级到第n级则是逐步缩小的下采样版本。当距离相机较远时，使用最高Mipmap级别的纹理，可以节省较多的显存和渲染时间；当距离相机较近时，使用最低的Mipmap级别，可以得到更多的纹理细节。这样一来，在不同距离与角度下，都能获得较为清晰的视觉效果。

mipmap作用在管线中的片元着色器阶段